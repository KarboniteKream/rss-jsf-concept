<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:head>
		<title>kream</title>
		<meta charset="UTF-8" />
		<link href="resources/kream.png" rel="icon" type="image/png" />
		<link href="style.css" rel="stylesheet" type="text/css" />
		<script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
		<script src="scripts/html.sortable.min.js" type="text/javascript"></script>
		<script src="script.js" type="text/javascript"></script>
	</h:head>
	<h:body>
		<header>
			<h1><a href="/">kream.io</a><span class="version"> rss</span></h1>
			<nav>
				<ul>
					<li><a href="/home.php" class="active">Home</a></li>
					<li><a href="/settings.php">Settings</a></li>
					<li><a href="/help.html">Help</a></li>
					<li><a href="util.php?function=sign-out">Sign out</a></li>
				</ul>
			</nav>
		</header>
		<div id="main">
			<div id="sidebar">
				<span id="new-subscription" class="button-primary block">New subscription</span>
				<div id="add-subscription">
					<form action="javascript:;" method="post">
						<fieldset>
							<button type="submit" tabindex="2">Add</button>
							<input type="url" placeholder="subscription URL" tabindex="1"/>
						</fieldset>
					</form>
				</div>
				<div id="sidebar-content">
					<h:outputText value="#{contentBean.sidebar}" escape="false" />
				</div>
			</div>
			<div id="content">
				<div class="header">
					<ui:fragment rendered="#{contentBean.location eq 'feed'}">
						<span class="button-primary">Refresh</span>
						<span class="button-secondary">Settings</span>
						<span class="button-secondary open-popup" target-popup="#unsubscribe">Unsubscribe</span>
						<h2 id="feed-name"></h2>
					</ui:fragment>
					<ui:fragment rendered="#{contentBean.location eq 'home'}">
						<div class="header-secondary">
							<span class="button-primary">Refresh</span>
							<h2>Featured articles</h2>
						</div>
						<span class="button-secondary">Settings</span>
						<h2>Home</h2>
					</ui:fragment>
				</div>
				<div id="reader">
					<ui:fragment rendered="#{contentBean.location eq 'feed'}">
						<ui:repeat var="article" value="#{contentBean.articles}">
							<article id="#{article.id}" class="unread">
								<div class="date">#{article.date}</div>
								<h2><a href="#{article.url}">#{article.title}</a></h2>
								<ui:fragment rendered="#{not empty article.author}"><div class="author">by <b>#{article.author}</b></div></ui:fragment>
								<div class="content"><p><h:outputText value="#{article.content}" escape="false" /></p></div>
								<div class="action-bar">
									<span>Like</span>
									<span>Mark as read</span>
								</div>
							</article>
						</ui:repeat>
					</ui:fragment>
					<ui:fragment rendered="#{contentBean.location eq 'home'}">
						<div class="home-left">
							<h2 class="notice">You have 7 unread articles.</h2>
							<div id="widgets">
								<img src="http://imgs.xkcd.com/comics/time.png" title="The end." alt="The current time is unknown" />
							</div>
						</div>
						<div class="home-right">
							<ui:repeat var="article" value="#{contentBean.featured}">
								<article id="#{article.id}">
									<div class="date">#{article.date}</div>
									<h2><a href="#{article.url}">#{article.title}</a></h2>
									<ui:fragment rendered="#{not empty article.author}"><div class="author">by <b>#{article.author}</b></div></ui:fragment>
									<div class="content"><p><h:outputText value="#{article.content}" escape="false" /></p></div>
									<div class="action-bar">
										<span>Like</span>
									</div>
								</article>
							</ui:repeat>
						</div>
					</ui:fragment>
				</div>
			</div>
		</div>
		<div id="overlay" onclick="hideOverlay()"></div>
		<div id="unsubscribe" class="popup">
			<div class="header">
				<span class="button-secondary" onclick="hideOverlay()">Ã—</span>
				<h3>Unsubscribe</h3>
			</div>
			<form action="javascript:unsubscribe()" method="post">
				<fieldset>
					<span id="form-question">Are you sure you want to unsubscribe from FEED?</span>
					<button type="submit" tabindex="2">Yes</button>
					<button id="unsubscribe-button" type="button" class="button-secondary" onclick="hideOverlay()" tabindex="1">No</button>
				</fieldset>
			</form>
		</div>
	</h:body>
</html>